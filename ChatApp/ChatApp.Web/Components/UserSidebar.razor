@rendermode InteractiveServer

@using ChatApp.Web.ViewModels

<div class="user-sidebar">
     <div class="user-profile">
          <img src="@(CurrentChatUserVM?.AvatarUrl ?? "/images/no-profile.png")" alt="User avatar" />
          <div class="user-profile__name">@CurrentChatUserVM?.Name</div>
          <div class="user-profile__status">@CurrentChatUserVM?.TimeAgo</div>
     </div>
     <div class="sidebar-divider"></div>
     <div class="user-media-section">
          <div class="media-section-title">Shared Media</div>
          @if (MediaItems.Any())
          {
               <div class="media-grid">
                    @foreach (var media in MediaItems)
                    {
                         @switch (media.FileType)
                         {
                              case "image":
                              case "gif":
                                   <a href="@media.FileUrl" target="_blank">
                                        <img src="@media.FileUrl" alt="Image" class="media-thumb" />
                                   </a>
                                   break;
                              case "video":
                                   <a href="@media.FileUrl" target="_blank" class="media-file">
                                        <span class="file-icon">🎥</span> @media.FileName
                                   </a>
                                   break;
                              case "pdf":
                                   <a href="@media.FileUrl" target="_blank" class="media-file">
                                        <span class="file-icon">📄</span> @media.FileName
                                   </a>
                                   break;
                              case "text":
                                   <a href="@media.FileUrl" target="_blank" class="media-file">
                                        <span class="file-icon">📝</span> @media.FileName
                                   </a>
                                   break;
                              default:
                                   <a href="@media.FileUrl" target="_blank" class="media-file">
                                        <span class="file-icon">📎</span> @media.FileName
                                   </a>
                                   break;
                         }
                    }
               </div>
          }
          else
          {
               <div class="empty-media">No media shared yet.</div>
          }
     </div>
     <AuthorizeView>
          <Authorized>
               <form method="post" action="/account/logout">
                    <AntiforgeryToken />
                    <input type="hidden" name="returnUrl" value="" />
                    <button type="submit" class="logout-btn">Logout</button>
               </form>
          </Authorized>
     </AuthorizeView>
</div> 